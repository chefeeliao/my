<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶£å‘³æ•°å­¦ç»ƒä¹  - æ™ºèƒ½å‡ºé¢˜ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A9DFF',
                        secondary: '#FFD54F',
                        success: '#4CAF50',
                        danger: '#F44336',
                        warning: '#FF9800',
                        info: '#2196F3',
                        light: '#FFF9C4',
                        dark: '#5D4037'
                    },
                    fontFamily: {
                        sans: ['Comic Sans MS', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            }
            .star-glow {
                text-shadow: 0 0 10px rgba(255, 213, 79, 0.8);
            }
            .twinkle {
                animation: twinkle 1s ease-in-out infinite alternate;
            }
            .correct-animation {
                animation: correctAnswer 0.5s ease-in-out;
            }
            .wrong-animation {
                animation: wrongAnswer 0.5s ease-in-out;
            }
            .float {
                animation: float 3s ease-in-out infinite;
            }
            @keyframes twinkle {
                from { opacity: 0.8; transform: scale(1); }
                to { opacity: 1; transform: scale(1.1); }
            }
            @keyframes correctAnswer {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); background-color: rgba(76, 175, 80, 0.2); }
                100% { transform: scale(1); }
            }
            @keyframes wrongAnswer {
                0% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                50% { transform: translateX(5px); }
                75% { transform: translateX(-5px); }
                100% { transform: translateX(0); }
            }
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-100 to-purple-100 min-h-screen">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="bg-gradient-to-r from-primary to-info text-white shadow-lg">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fa fa-calculator text-3xl mr-3 text-secondary"></i>
                <h1 class="text-2xl md:text-3xl font-bold text-shadow">è¶£å‘³æ•°å­¦ç»ƒä¹ </h1>
            </div>
            <div class="text-lg font-semibold">
                <i class="fa fa-star text-secondary mr-1"></i>
                <span id="totalScore">0</span> åˆ†
                <span class="ml-4 text-sm bg-secondary/80 px-2 py-1 rounded-full">
                    å½“å‰éš¾åº¦: <span id="currentDifficulty">1</span>æ˜Ÿ
                </span>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="container mx-auto px-4 py-8">
        <!-- å¼€å§‹ç•Œé¢ -->
        <div id="startScreen" class="flex flex-col items-center justify-center min-h-[60vh] z-50 relative">
            <div class="text-center mb-8">
                <h2 class="text-4xl md:text-5xl font-bold text-primary mb-4 text-shadow-lg float">
                    æ¬¢è¿æ¥åˆ°æ•°å­¦ä¹å›­ï¼
                </h2>
                <p class="text-xl text-gray-700 mb-6">
                    æ™ºèƒ½å‡ºé¢˜ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„ç­”é¢˜æƒ…å†µè°ƒæ•´éš¾åº¦å“¦ï¼
                </p>
                <!-- å­¦ä¹ è¿›åº¦æç¤º -->
                <div id="learningTip" class="hidden bg-light p-4 rounded-xl shadow-md max-w-md mx-auto mb-6">
                    <h3 class="font-bold text-primary mb-2"><i class="fa fa-lightbulb-o mr-2"></i>å­¦ä¹ å»ºè®®</h3>
                    <p id="tipContent" class="text-gray-700 text-left">
                        å¼€å§‹ä½ çš„ç¬¬ä¸€æ¬¡ç»ƒä¹ ï¼Œç³»ç»Ÿä¼šæ ¹æ®ä½ çš„è¡¨ç°è°ƒæ•´é¢˜ç›®éš¾åº¦ï¼
                    </p>
                </div>
            </div>
            
            <div class="relative mb-12">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/aaee1274a0534f80a9dfa1bf090b436a~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=202601161755478BC4EB34DD7E510F9AC8&rrcfp=f06b921b&x-expires=1771149393&x-signature=m8KtBEeL3exyTQ2nYdVp5%2FNsUmY%3D" 
                     alt="æ•°å­¦è€å¸ˆ" 
                     class="w-48 h-48 object-contain float">
                <div class="absolute -top-4 -right-4 bg-secondary text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold transform rotate-12 shadow-lg">
                    ä½ å¥½ï¼
                </div>
            </div>
            
            <button id="startBtn" class="bg-gradient-to-r from-primary to-info text-white text-2xl font-bold px-12 py-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 z-10 relative"
                    style="pointer-events: auto !important; cursor: pointer !important;">
                <i class="fa fa-play-circle mr-3"></i>
                å¼€å§‹ç»ƒä¹ 
            </button>
        </div>

        <!-- é¢˜ç›®ç•Œé¢ -->
        <div id="quizScreen" class="hidden z-40 relative">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-primary">
                        <i class="fa fa-pencil-square-o mr-2"></i>
                        æ•°å­¦é¢˜ç›®
                    </h2>
                    <div class="text-lg font-semibold text-gray-700">
                        é¢˜ç›® <span id="currentQuestion">1</span>/5
                    </div>
                </div>
                
                <!-- éš¾åº¦æ˜Ÿçº§ -->
                <div id="difficultyStars" class="flex justify-center mb-6">
                    <!-- æ˜Ÿçº§å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- é¢˜ç›®å†…å®¹ -->
                <div id="questionContainer" class="mb-8">
                    <div id="questionText" class="text-2xl md:text-3xl font-bold text-center mb-6 p-4 bg-light rounded-xl shadow-inner">
                        <!-- é¢˜ç›®å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    
                    <!-- ç­”é¢˜åŒºåŸŸ -->
                    <div class="flex justify-center">
                        <input type="text" id="answerInput" 
                               class="w-full md:w-1/2 lg:w-1/3 text-2xl text-center border-4 border-primary rounded-xl p-4 focus:outline-none focus:border-info transition-colors duration-300"
                               placeholder="è¯·è¾“å…¥ä½ çš„ç­”æ¡ˆ..." maxlength="10"
                               style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                    </div>
                </div>
                
                <!-- æŒ‰é’®åŒºåŸŸ -->
                <div class="flex flex-col md:flex-row justify-center gap-4">
                    <button id="submitAnswerBtn" class="bg-success text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        <i class="fa fa-check-circle mr-2"></i>
                        æäº¤ç­”æ¡ˆ
                    </button>
                    <button id="hintBtn" class="bg-warning text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        <i class="fa fa-lightbulb-o mr-2"></i>
                        æç¤º
                    </button>
                </div>
            </div>
            
            <!-- è§£æåŒºåŸŸ -->
            <div id="explanationContainer" class="hidden bg-white rounded-2xl shadow-xl p-6 mb-8">
                <h3 class="text-xl font-bold text-primary mb-4">
                    <i class="fa fa-info-circle mr-2"></i>
                    è§£æ
                </h3>
                <div id="explanationText" class="text-gray-700">
                    <!-- è§£æå°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <!-- ä¸‹ä¸€é¢˜æŒ‰é’® -->
            <div class="text-center">
                <button id="nextQuestionBtn" class="hidden bg-primary text-white text-xl font-bold px-10 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300"
                        style="pointer-events: auto !important; cursor: pointer !important;">
                    <i class="fa fa-arrow-right mr-2"></i>
                    ä¸‹ä¸€é¢˜
                </button>
            </div>
            
            <!-- æç¤ºæ–‡æœ¬ -->
            <div id="hintText" class="hidden mt-4 p-4 bg-light rounded-lg border-l-4 border-warning">
                <!-- æç¤ºå°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- ç»“æœç•Œé¢ -->
        <div id="resultScreen" class="hidden z-40 relative">
            <div class="bg-white rounded-2xl shadow-xl p-8 text-center">
                <div class="mb-8">
                    <div class="inline-block p-6 bg-light rounded-full mb-6">
                        <i class="fa fa-trophy text-6xl text-secondary"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-primary mb-2">ç»ƒä¹ å®Œæˆï¼</h2>
                    <p class="text-xl text-gray-600">æ™ºèƒ½åˆ†æå·²å®Œæˆï¼Œä¸‹ä¸€è½®å°†é’ˆå¯¹æ€§å‡ºé¢˜</p>
                </div>
                
                <div class="mb-8">
                    <div class="text-6xl font-bold text-primary mb-2">
                        <i class="fa fa-star text-secondary mr-2"></i>
                        <span id="finalScore">0</span>
                    </div>
                    <p class="text-xl text-gray-600">æ€»åˆ†</p>
                </div>
                
                <!-- æ™ºèƒ½åˆ†æç»“æœ -->
                <div id="analysisResult" class="bg-light p-4 rounded-xl mb-8 max-w-2xl mx-auto text-left">
                    <h3 class="font-bold text-primary text-xl mb-3 text-center"><i class="fa fa-bar-chart mr-2"></i>æ™ºèƒ½å­¦ä¹ åˆ†æ</h3>
                    <div id="analysisContent" class="text-gray-700">
                        <!-- åˆ†æç»“æœå°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div id="resultMessage" class="mb-8 text-2xl font-bold">
                    <!-- ç»“æœæ¶ˆæ¯å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- æŒ‰é’®ç»„ -->
                <div class="flex flex-col md:flex-row justify-center gap-4">
                    <button id="viewAnswersBtn" class="bg-info text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        <i class="fa fa-list-alt mr-2"></i>
                        æŸ¥çœ‹ç­”æ¡ˆ
                    </button>
                    <button id="restartBtn" class="bg-primary text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        <i class="fa fa-refresh mr-2"></i>
                        ç»§ç»­ç»ƒä¹ 
                    </button>
                    <button id="backToHomeBtn" class="bg-dark text-white text-xl font-bold px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300">
                        <i class="fa fa-home mr-2"></i>
                        è¿”å›ä¸»é¡µ
                    </button>
                </div>
            </div>
            
            <!-- ç­”æ¡ˆå›é¡¾ -->
            <div id="answersReview" class="hidden mt-8 bg-white rounded-2xl shadow-xl p-6">
                <h3 class="text-2xl font-bold text-primary mb-4">
                    <i class="fa fa-history mr-2"></i>
                    ç­”æ¡ˆå›é¡¾
                </h3>
                <div id="answersList" class="space-y-4">
                    <!-- ç­”æ¡ˆåˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </main>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <footer class="bg-primary text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2026 è¶£å‘³æ•°å­¦ç»ƒä¹  - æ™ºèƒ½å‡ºé¢˜ç³»ç»Ÿ</p>
        </div>
    </footer>

    <script>
        // å…¨å±€å˜é‡ - æ–°å¢æ™ºèƒ½å‡ºé¢˜ç›¸å…³é…ç½®
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let totalScore = 0;
        let userAnswers = [];
        let currentDifficultyLevel = 1; // å½“å‰åŸºç¡€éš¾åº¦ï¼ˆ1-5æ˜Ÿï¼‰
        let wrongQuestionTypes = [];    // é”™è¯¯é¢˜å‹è®°å½•
        let correctQuestionTypes = new Set(); // æ­£ç¡®é¢˜å‹è®°å½•
        let practiceRound = 1;          // ç»ƒä¹ è½®æ¬¡
        
        // DOMå…ƒç´ 
        const startScreen = document.getElementById('startScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultScreen = document.getElementById('resultScreen');
        const startBtn = document.getElementById('startBtn');
        const submitAnswerBtn = document.getElementById('submitAnswerBtn');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const hintBtn = document.getElementById('hintBtn');
        const viewAnswersBtn = document.getElementById('viewAnswersBtn');
        const restartBtn = document.getElementById('restartBtn');
        const backToHomeBtn = document.getElementById('backToHomeBtn');
        const questionText = document.getElementById('questionText');
        const answerInput = document.getElementById('answerInput');
        const explanationContainer = document.getElementById('explanationContainer');
        const explanationText = document.getElementById('explanationText');
        const difficultyStars = document.getElementById('difficultyStars');
        const currentQuestionSpan = document.getElementById('currentQuestion');
        const totalScoreSpan = document.getElementById('totalScore');
        const finalScoreSpan = document.getElementById('finalScore');
        const resultMessage = document.getElementById('resultMessage');
        const answersList = document.getElementById('answersList');
        const answersReview = document.getElementById('answersReview');
        const hintText = document.getElementById('hintText');
        const currentDifficultySpan = document.getElementById('currentDifficulty');
        const learningTip = document.getElementById('learningTip');
        const tipContent = document.getElementById('tipContent');
        const analysisResult = document.getElementById('analysisResult');
        const analysisContent = document.getElementById('analysisContent');
        
        // é¢˜å‹é…ç½®ï¼ˆæŒ‰éš¾åº¦åˆ†çº§ï¼‰
        const questionTypes = {
            addition: {
                name: "åŠ æ³•",
                levels: [
                    { min: 1, max: 10, points: 2 },    // 1æ˜Ÿ
                    { min: 10, max: 30, points: 4 },   // 2æ˜Ÿ
                    { min: 30, max: 100, points: 6 },  // 3æ˜Ÿ
                    { min: 100, max: 500, points: 8 }, // 4æ˜Ÿ
                    { min: 500, max: 1000, points: 10} // 5æ˜Ÿ
                ]
            },
            subtraction: {
                name: "å‡æ³•",
                levels: [
                    { min: 1, max: 10, points: 2 },
                    { min: 10, max: 30, points: 4 },
                    { min: 30, max: 100, points: 6 },
                    { min: 100, max: 500, points: 8 },
                    { min: 500, max: 1000, points: 10}
                ]
            },
            multiplication: {
                name: "ä¹˜æ³•",
                levels: [
                    { min: 1, max: 9, points: 2 },     // 1æ˜Ÿï¼šä¹ä¹ä¹˜æ³•è¡¨
                    { min: 10, max: 20, points: 4 },   // 2æ˜Ÿï¼šä¸¤ä½æ•°ä¹˜æ³•
                    { min: 20, max: 50, points: 6 },   // 3æ˜Ÿ
                    { min: 50, max: 100, points: 8 },  // 4æ˜Ÿ
                    { min: 100, max: 200, points: 10}  // 5æ˜Ÿ
                ]
            },
            division: {
                name: "é™¤æ³•",
                levels: [
                    { min: 1, max: 9, points: 2 },     // 1æ˜Ÿï¼šä¹ä¹é™¤æ³•è¡¨
                    { min: 10, max: 20, points: 4 },   // 2æ˜Ÿ
                    { min: 20, max: 50, points: 6 },   // 3æ˜Ÿ
                    { min: 50, max: 100, points: 8 },  // 4æ˜Ÿ
                    { min: 100, max: 200, points: 10}  // 5æ˜Ÿ
                ]
            },
            mixed: {
                name: "æ··åˆè¿ç®—",
                levels: [
                    { min: 1, max: 20, points: 4 },    // 3æ˜Ÿèµ·æ­¥
                    { min: 20, max: 50, points: 6 },   // 4æ˜Ÿ
                    { min: 50, max: 100, points: 8 },  // 5æ˜Ÿ
                    { min: 100, max: 200, points: 9 }, // è¿›é˜¶
                    { min: 200, max: 500, points: 10}  // é«˜é˜¶
                ]
            }
        };
        
        // æ ¸å¿ƒï¼šæ™ºèƒ½å‡ºé¢˜å‡½æ•°
        function generateSmartQuestions() {
            currentQuestions = [];
            const totalQuestions = 5;
            let questionCount = 0;
            
            console.log(`=== ç¬¬${practiceRound}è½®æ™ºèƒ½å‡ºé¢˜ ===`);
            console.log(`å½“å‰éš¾åº¦ï¼š${currentDifficultyLevel}æ˜Ÿ`);
            console.log(`éœ€è¦å·©å›ºçš„é¢˜å‹ï¼š${wrongQuestionTypes.join(', ')}`);
            console.log(`å·²æŒæ¡çš„é¢˜å‹ï¼š${Array.from(correctQuestionTypes).join(', ')}`);
            
            // ç¬¬ä¸€æ­¥ï¼šä¼˜å…ˆç”Ÿæˆé”™è¯¯é¢˜å‹ï¼ˆå·©å›ºç»ƒä¹ ï¼‰
            let å·©å›ºé¢˜æ•°é‡ = 0;
            if (wrongQuestionTypes.length > 0 && practiceRound > 1) {
                console.log("ç”Ÿæˆé”™é¢˜å·©å›ºé¢˜ç›®");
                const wrongTypes = [...new Set(wrongQuestionTypes)]; // å»é‡
                å·©å›ºé¢˜æ•°é‡ = Math.min(wrongTypes.length, 3); // æœ€å¤š3é“å·©å›ºé¢˜ï¼Œé¿å…æ— é™å¾ªç¯
                
                for (let i = 0; i < å·©å›ºé¢˜æ•°é‡ && questionCount < totalQuestions; i++) {
                    const type = wrongTypes[i % wrongTypes.length];
                    const question = generateQuestionByType(type, currentDifficultyLevel);
                    currentQuestions.push(question);
                    questionCount++;
                }
            }
            
            // ç¬¬äºŒæ­¥ï¼šç”Ÿæˆæ–°éš¾åº¦é¢˜ç›®ï¼ˆæŒ‘æˆ˜æå‡ï¼‰
            while (questionCount < totalQuestions) {
                let questionType;
                
                // å¦‚æœæœ‰å·²æŒæ¡çš„é¢˜å‹ï¼Œç”Ÿæˆæ›´é«˜éš¾åº¦çš„è¯¥ç±»å‹é¢˜ç›®
                if (correctQuestionTypes.size > 0 && Math.random() > 0.3) {
                    const correctTypes = Array.from(correctQuestionTypes);
                    questionType = correctTypes[Math.floor(Math.random() * correctTypes.length)];
                    // éš¾åº¦æå‡1çº§ï¼ˆä¸è¶…è¿‡5æ˜Ÿï¼‰
                    const difficulty = Math.min(currentDifficultyLevel + 1, 5);
                    const question = generateQuestionByType(questionType, difficulty);
                    currentQuestions.push(question);
                } else {
                    // ç”Ÿæˆæ–°é¢˜å‹æˆ–å½“å‰éš¾åº¦é¢˜å‹
                    const allTypes = Object.keys(questionTypes);
                    questionType = allTypes[Math.floor(Math.random() * allTypes.length)];
                    const question = generateQuestionByType(questionType, currentDifficultyLevel);
                    currentQuestions.push(question);
                }
                questionCount++;
            }
            
            console.log(`ç”Ÿæˆé¢˜ç›®åˆ—è¡¨ï¼š`, currentQuestions);
            return currentQuestions;
        }
        
        // æ ¹æ®é¢˜å‹å’Œéš¾åº¦ç”Ÿæˆå•ä¸ªé¢˜ç›®
        function generateQuestionByType(type, difficultyLevel) {
            const levelIndex = Math.min(difficultyLevel - 1, 4); // ç¡®ä¿ä¸è¶Šç•Œï¼ˆ0-4å¯¹åº”1-5æ˜Ÿï¼‰
            const levelConfig = questionTypes[type].levels[levelIndex];
            const min = levelConfig.min;
            const max = levelConfig.max;
            const points = levelConfig.points;
            
            let num1, num2, answer, questionStr, explanation;
            
            switch(type) {
                case 'addition':
                    num1 = Math.floor(Math.random() * (max - min + 1)) + min;
                    num2 = Math.floor(Math.random() * (max - min + 1)) + min;
                    answer = num1 + num2;
                    questionStr = `${num1} + ${num2} = ?`;
                    explanation = `åŠ æ³•è¿ç®—ï¼š${num1} + ${num2} = ${answer}ã€‚ç›¸åŒæ•°ä½å¯¹é½ï¼Œä»ä¸ªä½åŠ èµ·ï¼Œæ»¡åè¿›ä¸€ã€‚`;
                    break;
                    
                case 'subtraction':
                    num1 = Math.floor(Math.random() * (max - min + 1)) + min;
                    num2 = Math.floor(Math.random() * (num1 - min + 1)) + min; // ç¡®ä¿ç»“æœéè´Ÿ
                    answer = num1 - num2;
                    questionStr = `${num1} - ${num2} = ?`;
                    explanation = `å‡æ³•è¿ç®—ï¼š${num1} - ${num2} = ${answer}ã€‚ç›¸åŒæ•°ä½å¯¹é½ï¼Œä»ä¸ªä½å‡èµ·ï¼Œä¸å¤Ÿå‡æ—¶å‘å‰ä¸€ä½å€Ÿä¸€å½“åã€‚`;
                    break;
                    
                case 'multiplication':
                    num1 = Math.floor(Math.random() * (max - min + 1)) + min;
                    num2 = Math.floor(Math.random() * (max - min + 1)) + min;
                    answer = num1 * num2;
                    questionStr = `${num1} Ã— ${num2} = ?`;
                    explanation = `ä¹˜æ³•è¿ç®—ï¼š${num1} Ã— ${num2} = ${answer}ã€‚ä¹˜æ³•æ˜¯ç›¸åŒåŠ æ•°æ±‚å’Œçš„ç®€ä¾¿è¿ç®—ï¼Œä¾‹å¦‚${num1}ä¸ª${num2}ç›¸åŠ ç­‰äº${answer}ã€‚`;
                    break;
                    
                case 'division':
                    // ç¡®ä¿èƒ½æ•´é™¤
                    num2 = Math.floor(Math.random() * (max - min + 1)) + min;
                    answer = Math.floor(Math.random() * (max - min + 1)) + min;
                    num1 = num2 * answer;
                    questionStr = `${num1} Ã· ${num2} = ?`;
                    explanation = `é™¤æ³•è¿ç®—ï¼š${num1} Ã· ${num2} = ${answer}ã€‚é™¤æ³•æ˜¯ä¹˜æ³•çš„é€†è¿ç®—ï¼Œ${num2} Ã— ${answer} = ${num1}ã€‚`;
                    break;
                    
                case 'mixed':
                    // ç”Ÿæˆæ··åˆè¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤äºŒé€‰ä¸€ç»„åˆï¼‰
                    const ops = ['+', '-', 'Ã—', 'Ã·'];
                    const op1 = ops[Math.floor(Math.random() * 2)]; // å…ˆé€‰åŠ å‡
                    const op2 = ops[2 + Math.floor(Math.random() * 2)]; // å†é€‰ä¹˜é™¤
                    
                    num1 = Math.floor(Math.random() * (max - min + 1)) + min;
                    num2 = Math.floor(Math.random() * (max/2 - min + 1)) + min;
                    num3 = Math.floor(Math.random() * (max/2 - min + 1)) + min;
                    
                    // ç¡®ä¿è¿ç®—ç»“æœä¸ºæ­£æ•´æ•°
                    let tempResult, finalAnswer;
                    if (op2 === 'Ã—') {
                        tempResult = num2 * num3;
                    } else {
                        num3 = Math.floor(Math.random() * (Math.min(num2, max/2) - min + 1)) + min;
                        tempResult = Math.floor(num2 / num3);
                        num2 = tempResult * num3; // ç¡®ä¿æ•´é™¤
                    }
                    
                    if (op1 === '+') {
                        finalAnswer = num1 + tempResult;
                        questionStr = `${num1} ${op1} (${num2} ${op2} ${num3}) = ?`;
                        explanation = `æ··åˆè¿ç®—ï¼šå…ˆç®—æ‹¬å·å†… ${num2} ${op2} ${num3} = ${tempResult}ï¼Œå†ç®— ${num1} ${op1} ${tempResult} = ${finalAnswer}ã€‚æ³¨æ„ï¼šæ··åˆè¿ç®—å…ˆç®—ä¹˜é™¤åç®—åŠ å‡ï¼Œæœ‰æ‹¬å·å…ˆç®—æ‹¬å·å†…ã€‚`;
                    } else {
                        num1 = Math.max(num1, tempResult + 1); // ç¡®ä¿ç»“æœä¸ºæ­£
                        finalAnswer = num1 - tempResult;
                        questionStr = `${num1} ${op1} (${num2} ${op2} ${num3}) = ?`;
                        explanation = `æ··åˆè¿ç®—ï¼šå…ˆç®—æ‹¬å·å†… ${num2} ${op2} ${num3} = ${tempResult}ï¼Œå†ç®— ${num1} ${op1} ${tempResult} = ${finalAnswer}ã€‚æ³¨æ„ï¼šæ··åˆè¿ç®—å…ˆç®—ä¹˜é™¤åç®—åŠ å‡ï¼Œæœ‰æ‹¬å·å…ˆç®—æ‹¬å·å†…ã€‚`;
                    }
                    answer = finalAnswer;
                    break;
            }
            
            return {
                type: type,
                typeName: questionTypes[type].name,
                question: questionStr,
                answer: answer,
                points: points,
                difficulty: difficultyLevel,
                explanation: explanation
            };
        }
        
        // åˆå§‹åŒ–æ˜Ÿçº§æ˜¾ç¤º
        function renderDifficultyStars(level) {
            difficultyStars.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('i');
                star.className = `fa fa-star text-2xl ${i <= level ? 'text-secondary star-glow twinkle' : 'text-gray-300'}`;
                difficultyStars.appendChild(star);
            }
            currentDifficultySpan.textContent = level;
        }
        
        // åŠ è½½å½“å‰é¢˜ç›®
        function loadCurrentQuestion() {
            if (currentQuestionIndex < currentQuestions.length) {
                const question = currentQuestions[currentQuestionIndex];
                questionText.textContent = question.question;
                currentQuestionSpan.textContent = currentQuestionIndex + 1;
                renderDifficultyStars(question.difficulty);
                
                // é‡ç½®ç­”é¢˜åŒºåŸŸ
                answerInput.value = '';
                answerInput.focus();
                explanationContainer.classList.add('hidden');
                nextQuestionBtn.classList.add('hidden');
                hintText.classList.add('hidden');
                
                // å¯ç”¨æŒ‰é’®
                submitAnswerBtn.disabled = false;
                hintBtn.disabled = false;
                
                console.log(`åŠ è½½é¢˜ç›® ${currentQuestionIndex + 1}ï¼š${question.question} (ç­”æ¡ˆï¼š${question.answer})`);
            } else {
                // æ‰€æœ‰é¢˜ç›®å®Œæˆï¼Œæ˜¾ç¤ºç»“æœ
                showResult();
            }
        }
        
        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const userAnswer = parseFloat(answerInput.value.trim());
            const currentQuestion = currentQuestions[currentQuestionIndex];
            
            // éªŒè¯è¾“å…¥
            if (isNaN(userAnswer)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—ç­”æ¡ˆï¼');
                answerInput.focus();
                return;
            }
            
            // ç¦ç”¨æäº¤æŒ‰é’®
            submitAnswerBtn.disabled = true;
            
            // è®°å½•ç”¨æˆ·ç­”æ¡ˆ
            userAnswers.push({
                question: currentQuestion.question,
                userAnswer: userAnswer,
                correctAnswer: currentQuestion.answer,
                isCorrect: userAnswer === currentQuestion.answer,
                type: currentQuestion.type,
                typeName: currentQuestion.typeName,
                points: currentQuestion.points
            });
            
            // æ˜¾ç¤ºè§£æ
            explanationContainer.classList.remove('hidden');
            explanationText.textContent = currentQuestion.explanation;
            
            // åˆ¤æ–­ç­”æ¡ˆæ˜¯å¦æ­£ç¡®
            if (userAnswer === currentQuestion.answer) {
                // æ­£ç¡®
                score += currentQuestion.points;
                totalScore += currentQuestion.points;
                totalScoreSpan.textContent = totalScore;
                
                questionText.classList.add('correct-animation');
                setTimeout(() => {
                    questionText.classList.remove('correct-animation');
                }, 500);
                
                // è®°å½•å·²æŒæ¡çš„é¢˜å‹
                correctQuestionTypes.add(currentQuestion.type);
                
                // ç§»é™¤è¯¥é¢˜å‹çš„é”™è¯¯è®°å½•
                wrongQuestionTypes = wrongQuestionTypes.filter(type => type !== currentQuestion.type);
                
                alert(`å›ç­”æ­£ç¡®ï¼è·å¾— ${currentQuestion.points} åˆ†`);
            } else {
                // é”™è¯¯
                questionText.classList.add('wrong-animation');
                setTimeout(() => {
                    questionText.classList.remove('wrong-animation');
                }, 500);
                
                // è®°å½•é”™è¯¯é¢˜å‹
                wrongQuestionTypes.push(currentQuestion.type);
                
                alert(`å›ç­”é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${currentQuestion.answer}`);
            }
            
            // æ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®
            nextQuestionBtn.classList.remove('hidden');
            
            // æ›´æ–°å­¦ä¹ æç¤ºï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€è½®ï¼‰
            if (practiceRound === 1) {
                learningTip.classList.remove('hidden');
                if (wrongQuestionTypes.length > 0) {
                    tipContent.textContent = `ä½ åœ¨${wrongQuestionTypes.map(t => questionTypes[t].name).join('ã€')}é¢˜å‹ä¸Šéœ€è¦åŠ å¼ºç»ƒä¹ ï¼Œä¸‹ä¸€è½®ä¼šé’ˆå¯¹æ€§å‡ºé¢˜ï¼`;
                } else {
                    tipContent.textContent = `å¤ªæ£’äº†ï¼ä½ æŒæ¡äº†æ‰€æœ‰é¢˜å‹ï¼Œä¸‹ä¸€è½®å°†æå‡éš¾åº¦æŒ‘æˆ˜æ›´é«˜æ˜Ÿçº§é¢˜ç›®ï¼`;
                }
            }
        }
        
        // æ˜¾ç¤ºæç¤º
        function showHint() {
            const currentQuestion = currentQuestions[currentQuestionIndex];
            let hint = '';
            
            switch(currentQuestion.type) {
                case 'addition':
                    hint = `æç¤ºï¼šå¯ä»¥ç”¨å‡‘åæ³•ï¼Œä¾‹å¦‚æŠŠå…¶ä¸­ä¸€ä¸ªæ•°æ‹†æˆèƒ½å’Œå¦ä¸€ä¸ªæ•°å‡‘æˆ10çš„æ•°ã€‚`;
                    break;
                case 'subtraction':
                    hint = `æç¤ºï¼šå¯ä»¥ç”¨ç ´åæ³•ï¼ŒæŠŠè¢«å‡æ•°æ‹†æˆ10å’Œå‡ ï¼Œå…ˆç”¨10å‡å»å‡æ•°ï¼Œå†åŠ ä¸Šå‰©ä¸‹çš„æ•°ã€‚`;
                    break;
                case 'multiplication':
                    hint = `æç¤ºï¼šä¹˜æ³•å£è¯€è¡¨è®°ä¸€è®°ï¼Œ${currentQuestion.question.split('Ã—')[0]}çš„ä¹˜æ³•å£è¯€æ˜¯ä»€ä¹ˆï¼Ÿ`;
                    break;
                case 'division':
                    hint = `æç¤ºï¼šé™¤æ³•æ˜¯ä¹˜æ³•çš„é€†è¿ç®—ï¼Œæƒ³æƒ³å‡ ä¹˜é™¤æ•°ç­‰äºè¢«é™¤æ•°ï¼Ÿ`;
                    break;
                case 'mixed':
                    hint = `æç¤ºï¼šæ··åˆè¿ç®—å…ˆç®—ä¹˜é™¤åç®—åŠ å‡ï¼Œæœ‰æ‹¬å·å…ˆç®—æ‹¬å·é‡Œé¢çš„ï¼`;
                    break;
            }
            
            hintText.classList.remove('hidden');
            hintText.textContent = hint;
            
            // æç¤ºåæ‰£1åˆ†ï¼ˆå¯é€‰ï¼‰
            if (score > 0) {
                score = Math.max(0, score - 1);
                totalScoreSpan.textContent = totalScore;
                hintText.innerHTML += `<br><small class="text-danger">(æç¤ºæ‰£1åˆ†ï¼Œå½“å‰å¾—åˆ†ï¼š${score})</small>`;
            }
            
            // ç¦ç”¨æç¤ºæŒ‰é’®
            hintBtn.disabled = true;
        }
        
        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            currentQuestionIndex++;
            loadCurrentQuestion();
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            // æ˜¾ç¤ºæœ€ç»ˆå¾—åˆ†
            finalScoreSpan.textContent = score;
            
            // ç”Ÿæˆæ™ºèƒ½åˆ†æ
            generateAnalysis();
            
            // ç”Ÿæˆç»“æœæ¶ˆæ¯
            let message = '';
            const correctCount = userAnswers.filter(ans => ans.isCorrect).length;
            const totalCount = userAnswers.length;
            const accuracy = (correctCount / totalCount) * 100;
            
            if (accuracy === 100) {
                message = `<span class="text-success">ğŸ‰ æ»¡åˆ†ï¼ä½ çœŸæ˜¯æ•°å­¦å¤©æ‰ï¼</span>`;
                // æå‡éš¾åº¦ï¼ˆä¸è¶…è¿‡5æ˜Ÿï¼‰
                currentDifficultyLevel = Math.min(currentDifficultyLevel + 1, 5);
            } else if (accuracy >= 80) {
                message = `<span class="text-primary">ğŸ‘ ä¼˜ç§€ï¼ç»§ç»­ä¿æŒï¼Œä½ ç¦»æ»¡åˆ†åªå·®ä¸€ç‚¹ç‚¹ï¼</span>`;
            } else if (accuracy >= 60) {
                message = `<span class="text-warning">ğŸ‘ è‰¯å¥½ï¼è¿˜æœ‰æå‡ç©ºé—´ï¼Œç»§ç»­åŠªåŠ›ï¼</span>`;
            } else {
                message = `<span class="text-danger">ğŸ’ª åŠ æ²¹ï¼éœ€è¦å¤šç»ƒä¹ ï¼Œä¸‹ä¸€è½®é’ˆå¯¹æ€§è®­ç»ƒä¼šå¸®åŠ©ä½ æå‡ï¼</span>`;
                // é™ä½éš¾åº¦ï¼ˆä¸ä½äº1æ˜Ÿï¼‰
                currentDifficultyLevel = Math.max(currentDifficultyLevel - 1, 1);
            }
            
            resultMessage.innerHTML = message;
            
            console.log(`=== ç¬¬${practiceRound}è½®ç»ƒä¹ ç»“æœ ===`);
            console.log(`æ­£ç¡®ç‡ï¼š${accuracy}%`);
            console.log(`å¾—åˆ†ï¼š${score}`);
            console.log(`è°ƒæ•´åéš¾åº¦ï¼š${currentDifficultyLevel}æ˜Ÿ`);
        }
        
        // ç”Ÿæˆæ™ºèƒ½å­¦ä¹ åˆ†æ
        function generateAnalysis() {
            // ç»Ÿè®¡å„é¢˜å‹ç­”é¢˜æƒ…å†µ
            const typeStats = {};
            Object.keys(questionTypes).forEach(type => {
                typeStats[type] = {
                    name: questionTypes[type].name,
                    total: 0,
                    correct: 0,
                    wrong: 0,
                    accuracy: 0
                };
            });
            
            // ç»Ÿè®¡æ•°æ®
            userAnswers.forEach(ans => {
                typeStats[ans.type].total++;
                if (ans.isCorrect) {
                    typeStats[ans.type].correct++;
                } else {
                    typeStats[ans.type].wrong++;
                }
            });
            
            // è®¡ç®—æ­£ç¡®ç‡
            Object.keys(typeStats).forEach(type => {
                const stats = typeStats[type];
                if (stats.total > 0) {
                    stats.accuracy = (stats.correct / stats.total) * 100;
                }
            });
            
            // ç”Ÿæˆåˆ†ææŠ¥å‘Š
            let analysisHTML = `<ul class="list-disc pl-5 space-y-2">`;
            
            // æ€»ä½“æƒ…å†µ
            const correctCount = userAnswers.filter(ans => ans.isCorrect).length;
            const totalCount = userAnswers.length;
            analysisHTML += `<li><strong>æ€»ä½“è¡¨ç°ï¼š</strong>å…±ç­”é¢˜${totalCount}é“ï¼Œæ­£ç¡®${correctCount}é“ï¼Œæ­£ç¡®ç‡${(correctCount/totalCount*100).toFixed(1)}%</li>`;
            
            // å„é¢˜å‹åˆ†æ
            analysisHTML += `<li><strong>å„é¢˜å‹æŒæ¡æƒ…å†µï¼š</strong></li><ul class="list-circle pl-6 space-y-1">`;
            Object.keys(typeStats).forEach(type => {
                const stats = typeStats[type];
                if (stats.total > 0) {
                    let status = stats.accuracy === 100 ? 'âœ… å®Œå…¨æŒæ¡' : 
                                 stats.accuracy >= 80 ? 'ğŸŸ¢ åŸºæœ¬æŒæ¡' : 
                                 stats.accuracy >= 60 ? 'ğŸŸ¡ æœ‰å¾…æå‡' : 'ğŸ”´ éœ€è¦åŠ å¼º';
                    analysisHTML += `<li>${stats.name}ï¼šç­”é¢˜${stats.total}é“ï¼Œæ­£ç¡®${stats.correct}é“ï¼Œæ­£ç¡®ç‡${stats.accuracy.toFixed(1)}% ${status}</li>`;
                }
            });
            analysisHTML += `</ul>`;
            
            // å­¦ä¹ å»ºè®®
            analysisHTML += `<li><strong>å­¦ä¹ å»ºè®®ï¼š</strong>`;
            const weakTypes = Object.keys(typeStats).filter(type => typeStats[type].accuracy < 80 && typeStats[type].total > 0);
            if (weakTypes.length > 0) {
                analysisHTML += `é‡ç‚¹ç»ƒä¹ ${weakTypes.map(type => typeStats[type].name).join('ã€')}é¢˜å‹ï¼Œä¸‹ä¸€è½®å°†é’ˆå¯¹æ€§å‡ºé¢˜å·©å›ºï¼`;
            } else {
                analysisHTML += `å„é¢˜å‹æŒæ¡è‰¯å¥½ï¼Œä¸‹ä¸€è½®å°†æå‡éš¾åº¦æŒ‘æˆ˜æ›´é«˜æ˜Ÿçº§é¢˜ç›®ï¼`;
            }
            analysisHTML += `</li>`;
            
            // éš¾åº¦è°ƒæ•´è¯´æ˜
            analysisHTML += `<li><strong>éš¾åº¦è°ƒæ•´ï¼š</strong>å½“å‰éš¾åº¦å·²è°ƒæ•´ä¸º${currentDifficultyLevel}æ˜Ÿï¼Œä¸‹ä¸€è½®é¢˜ç›®å°†åŒ¹é…è¯¥éš¾åº¦ï¼</li>`;
            
            analysisHTML += `</ul>`;
            
            analysisContent.innerHTML = analysisHTML;
        }
        
        // æŸ¥çœ‹ç­”æ¡ˆå›é¡¾
        function viewAnswers() {
            answersReview.classList.toggle('hidden');
            if (!answersReview.classList.contains('hidden')) {
                answersList.innerHTML = '';
                
                userAnswers.forEach((ans, index) => {
                    const answerItem = document.createElement('div');
                    answerItem.className = `p-4 rounded-lg ${ans.isCorrect ? 'bg-success/10 border-l-4 border-success' : 'bg-danger/10 border-l-4 border-danger'}`;
                    
                    answerItem.innerHTML = `
                        <div class="font-bold text-lg">ç¬¬${index + 1}é¢˜ï¼š${ans.question}</div>
                        <div class="mt-2">
                            <span class="text-gray-700">ä½ çš„ç­”æ¡ˆï¼š</span>
                            <span class="${ans.isCorrect ? 'text-success font-bold' : 'text-danger font-bold'}">${ans.userAnswer}</span>
                        </div>
                        <div class="mt-1">
                            <span class="text-gray-700">æ­£ç¡®ç­”æ¡ˆï¼š</span>
                            <span class="text-primary font-bold">${ans.correctAnswer}</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600">
                            é¢˜å‹ï¼š${ans.typeName} | åˆ†å€¼ï¼š${ans.points} | ${ans.isCorrect ? 'å¾—åˆ†+' + ans.points : 'ä¸å¾—åˆ†'}
                        </div>
                    `;
                    
                    answersList.appendChild(answerItem);
                });
            }
        }
        
        // é‡æ–°å¼€å§‹ç»ƒä¹ 
        function restartPractice() {
            resultScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            answersReview.classList.add('hidden');
            
            // é‡ç½®æœ¬è½®å˜é‡
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            
            // å¢åŠ ç»ƒä¹ è½®æ¬¡
            practiceRound++;
            
            // ç”Ÿæˆæ–°çš„æ™ºèƒ½é¢˜ç›®
            generateSmartQuestions();
            
            // é‡ç½®å­¦ä¹ æç¤º
            if (practiceRound === 2) {
                tipContent.textContent = `ç¬¬äºŒè½®ç»ƒä¹ å¼€å§‹ï¼ç³»ç»Ÿå·²æ ¹æ®ä½ çš„ç­”é¢˜æƒ…å†µè°ƒæ•´äº†é¢˜ç›®éš¾åº¦å’Œé¢˜å‹åˆ†å¸ƒã€‚`;
            }
        }
        
        // è¿”å›ä¸»é¡µ
        function backToHome() {
            resultScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            answersReview.classList.add('hidden');
            
            // é‡ç½®æ‰€æœ‰å˜é‡ï¼ˆå›åˆ°åˆå§‹çŠ¶æ€ï¼‰
            currentQuestionIndex = 0;
            score = 0;
            totalScore = 0;
            userAnswers = [];
            currentDifficultyLevel = 1;
            wrongQuestionTypes = [];
            correctQuestionTypes = new Set();
            practiceRound = 1;
            
            totalScoreSpan.textContent = 0;
            learningTip.classList.add('hidden');
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initEventListeners() {
            // å¼€å§‹ç»ƒä¹ 
            startBtn.addEventListener('click', function() {
                startScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                
                // ç”Ÿæˆæ™ºèƒ½é¢˜ç›®
                generateSmartQuestions();
                
                // åŠ è½½ç¬¬ä¸€é¢˜
                loadCurrentQuestion();
            });
            
            // æäº¤ç­”æ¡ˆ
            submitAnswerBtn.addEventListener('click', checkAnswer);
            
            // ä¸‹ä¸€é¢˜
            nextQuestionBtn.addEventListener('click', nextQuestion);
            
            // æç¤º
            hintBtn.addEventListener('click', showHint);
            
            // æŸ¥çœ‹ç­”æ¡ˆ
            viewAnswersBtn.addEventListener('click', viewAnswers);
            
            // ç»§ç»­ç»ƒä¹ 
            restartBtn.addEventListener('click', restartPractice);
            
            // è¿”å›ä¸»é¡µ
            backToHomeBtn.addEventListener('click', backToHome);

            // æ–°å¢ï¼šå›è½¦é”®ç›‘å¬ - æ ¸å¿ƒåŠŸèƒ½
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.keyCode === 13) {
                    e.preventDefault();
                    
                    // å¼€å§‹ç•Œé¢æŒ‰å›è½¦ç›´æ¥å¼€å§‹
                    if (startScreen.style.display !== 'none' && !startScreen.classList.contains('hidden')) {
                        startBtn.click();
                        return;
                    }
                    
                    // é¢˜ç›®ç•Œé¢å›è½¦é€»è¾‘
                    if (!quizScreen.classList.contains('hidden')) {
                        // è¾“å…¥æ¡†æœ‰å€¼ä¸”å¯æäº¤ â†’ æäº¤ç­”æ¡ˆ
                        if (answerInput.value.trim() !== '' && !submitAnswerBtn.disabled) {
                            checkAnswer();
                        }
                        // ä¸‹ä¸€é¢˜æŒ‰é’®æ˜¾ç¤º â†’ è¿›å…¥ä¸‹ä¸€é¢˜
                        else if (!nextQuestionBtn.classList.contains('hidden')) {
                            nextQuestion();
                        }
                        // è¾“å…¥æ¡†ä¸ºç©º â†’ æç¤º
                        else if (answerInput.value.trim() === '' && !submitAnswerBtn.disabled) {
                            alert('è¯·è¾“å…¥ç­”æ¡ˆåå†æäº¤ï¼');
                            answerInput.focus();
                        }
                    }
                    
                    // ç»“æœç•Œé¢æŒ‰å›è½¦é‡æ–°ç»ƒä¹ 
                    if (!resultScreen.classList.contains('hidden')) {
                        restartBtn.click();
                    }
                }
            });

            // è¾“å…¥æ¡†å•ç‹¬ç›‘å¬å›è½¦ï¼ˆå¢å¼ºä½“éªŒï¼‰
            answerInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.keyCode === 13) {
                    e.preventDefault();
                    if (answerInput.value.trim() !== '') {
                        checkAnswer();
                    } else {
                        alert('è¯·è¾“å…¥ç­”æ¡ˆåå†æäº¤ï¼');
                    }
                }
            });
        }
        
        // åˆå§‹åŒ–åº”ç”¨
        function init() {
            console.log('è¶£å‘³æ•°å­¦ç»ƒä¹ ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼');
            initEventListeners();
            
            // åˆå§‹ç”Ÿæˆé¢˜ç›®ï¼ˆç¬¬ä¸€è½®ï¼‰
            generateSmartQuestions();
        }
        
        // å¯åŠ¨åº”ç”¨
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
